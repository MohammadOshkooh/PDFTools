 : متیروگلا ییامنهار 
 : اه فیرعت 
 s   هزاب عورش هطقن رظن دروم  و تساe  هزاب نایاپ هطقن  رظن دروم  تسا 
 length  تسا هزاب لوط 
 هطقن رد تنمگس فیرعت [x,x]  هطقن زا :x  ات هطقن length  هدید میا هدرک باختنا ام هک ییاه هزاب طسوت طاقن مامت )نایاپ هطقن ینعی(
 و دنا هدش دادعت  تنمگس رد میهد ماجنا ار راک نیا میناوتیم هک ییاه شورx,x  میسیون یم 
 هطقن زا میناوتیم هک تسا ییاه شور دادعت اب ربارب هطقن کی رد تنمگس رادقمx    ات length  میهد ششوپ ار 
o  تنمگس [l,r]  یاه تنمگس یاه رادقم عومجم ینعی [x,x]  هک یروط هبx  زاl  و دشاب یواسم رتگرزبx  زاr  رتکچوک
م  دشاب یواس 
 تنمگس رادقم هکنیا یارب : یزیل [l,r]  حلاطصا هب ، up-to-date   تنمگس رادقم دشاب دشاب [l,r]  رد دیاب ار
 2lazy [l,r]یاه یگژیو هب هجوت اب دعب و مینکب برض یمومع  و میهدب ماجنا یزیل هچب ود یارب ار تایلمع یزیل  زا دعب
 نآ lazy[l,r]  میهدب رارق رفص اب ربارب ار 
 : متیروگلا یارجا هوحن 
 هدامآ عباوت زا هدافتسا( میهدیم ماجنا اه هزاب یور رب ار  مک هب دایز زا یزاس بترم  تایلمع اه هزاب نایاپ ساسا رب ادتبا sort  یارب
.) تسا یفاک راک نیا 
 یاه هناخ مامت رادقم seg  و lazy  تسا رفص اب ربارب راک ادتبا رد 
 رادقم سپس seg[ length , length ]  رب ار  هطقن زا دناوتیم هک دراد دوجو یهت هزاب کی نوچ میهدیم رارق کی اب ربا length  هطقن ات
length  عبات طسوت یهدرادقم نیا دیاب هک تسا یهیدب( .تسا فیرعت قبط و دنیبب ار update    دوش ماجنا  رادقم تروصنیا ریغ رد
seg[0,  length ]   یاه تنمگس عومجم اب ربارب هک [x,x]  هک تساx  نیب۰  ات length رفص تسا )تسا هابتشا هک دنام دهاوخ 
 هزاب یازا هب ار ریز تایلمع x  هکx زا ۰  اتn  هزاب و تسا هدش تروس یاه هزاب اه هرامش نیا زا روظنم( میهدیم ماجنا
 نیرتشیب هک یا هزاب ینعی مرفصE )دراد ار 
 روظنم اه هزاب یور هقلح کی  تسا 
   هزاب یارب تلاح ودx  دراد دوجو 
1.  هزابx : دوشیمن باختنا 
 مامت هزاب نیا ندرکن باختنا اب تلاح نیا رد seg  هب هک یعقوم سپ دننامیم یقاب یلبق رادقم نامه اه
تسا تلاح نیمه باوج دوجوم یاه باوج و یلعف یاه تنمگس میسریم تلاح نیا   زاین یراک چیه سپ
 میهدب ماجنا تسین 
2. ب هزاx  دوشیم باختنا: 
 طاقن هب هجوت اب segment   رگا تسا ریذپناکما تلاح هسj  یاه رادقم ناونع هب ار segment   زا لبق
 هزاب نیاx   : میراد میریگب رظن رد 
   𝑆≤𝑗≤𝑒    تلاح نیا رد seg[s,e] اه شور نیا مامت رد هک دراد دوجو شور   ار ییاه هزاب ام
 هطقن زا اهنآ هک میا هدرک باختناj هطقن  ات  length   هک دنا هدید ارj  رظن دروم هرامش هب هجوت اب
 نیب دناوتیمs  وe  دشاب 
 هزاب باختنا اب سپx ام نآ نتشادرب و seg[ s,s]  دید میهاوخ ار .  مینادیم ار ریز طخ:   
 𝑠𝑒𝑔 [𝑠,𝑒]=𝑠𝑒𝑔 [𝑠,𝑠]+𝑠𝑒𝑔 [𝑠+1,𝑠+1]+𝑠𝑒𝑔 [𝑠+2,𝑠+2]+⋯+𝑠𝑒𝑔 [𝑒,𝑒]  
𝑠𝑒𝑔 [𝑠,𝑠] +=𝑠𝑒𝑔 [𝑠,𝑒] 